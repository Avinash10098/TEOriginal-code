<apex:page controller="S_ReceiptDashboardClass" showHeader="false"  standardStylesheets="true" sidebar="false" applyHtmlTag="false" applyBodyTag="false" docType="html-5.0">
    <apex:includeLightning />
    <html
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink">
        <head>
            <title>Receipts Dashboard</title>
            <apex:stylesheet value="{!URLFOR($Resource.SLDS090, 'assets/styles/salesforce-lightning-design-system-vf.css')}" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
            <script type="text/javascript">__sfdcSessionId = '{!$Api.Session_Id}';</script>
            <script src="/soap/ajax/9.0/connection.js"></script>
            <link href="https://fonts.googleapis.com/css?family=Lato:400,700&subset=latin,latin-ext" rel="stylesheet" type="text/css" />
        </head>
        <!-- Define Tab panel .css styles -->
    <style>
    .slds h1, .slds h2, .slds h3, .slds h4, .slds h5, .slds h6, .slds th, .slds td {
        font-family: 'Lato';
    }
    .slds .slds-theme--shade {
    background-color: aliceblue;
    }
    .activeTab {
    background-color: #104E8B; 
    color:white; 
    background-image:none;
    font-family: Lato,verdana, arial, sans-serif;
    font-size: 15px;    
    }
    .inactiveTab { 
    background-color: #525C65; 
    color:white; 
    background-image:none;
    font-family: Lato,verdana, arial, sans-serif;
    font-size: 15px;
    }
    .slds table {
        font-family: Lato,verdana, arial, sans-serif;
        font-size: 10.5px;
        empty-cells:show;
    }
    .slds th {
        padding: 1px;
        background-color:#104E8B;
        text-align:center;
        font-size: 12px;
    }
 
    .slds td {
        text-align:left;
    }
    .slds .slds-button {
        background-color:#838B8B;
    }
    body .bPageBlock .pbBody .pbSubheader {
        background-color:#838B8B;
        border-color:#838B8B;
    }
    
    </style>
    
        
<body>    
  <a href="/home/home.jsp"><img src="{!$Resource.Home}" style="float:left; width:4%; height:4%;"></img></a>
  <br/><br/>
<!-- REQUIRED SLDS WRAPPER -->
<div class="slds">    
<!-- PRIMARY CONTENT WRAPPER -->
<div class="myapp">   
<!-- SEARCH DEMANDS-->
<div aria-labelledby="DSform">
<!-- BOXED AREA -->
<fieldset class="slds-box slds-theme--shade slds-container--large slds-container--center slds-grid--align-spread">
  <legend id="dsForm" class="slds-text-heading--medium slds-p-vertical--medium">Receipts Dashboard</legend>
    <apex:form id="pendRegistration" styleClass="slds-form--inline">
            <apex:outputPanel id="messages">
                <apex:PageMessages id="pageMsgs" />
            </apex:outputPanel>
             <apex:actionStatus id="status">
                                    <apex:facet name="start">
                                        <div class="fadeMe">
                                            &nbsp;
                                        </div>
                                        <div style="position: fixed; left: 0; top: 0; bottom: 0; right: 0; z-index: 1001; margin: 15% 50%">
                                            <div style="display: inline-block; padding: 2px; background-color: #fff; width: 125px;">
                                                <img src="/img/loading.gif" style="float: left; margin: 8px;" />
                                                <span style="display: inline-block; padding: 10px 0px;">Please Wait...</span>
                                            </div>
                                        </div>
                                    </apex:facet>
              </apex:actionStatus>
                <apex:outputPanel id="searchButton">
                    <center>
                       <!-- <apex:commandButton value="Refresh Receipts List" styleClass="slds-button slds-button--brand slds-button--small" onclick="window.location.reload()" />-->
                        &nbsp;&nbsp;
                        <apex:commandButton value="New Receipt" styleClass="slds-button slds-button--brand slds-button--small" action="{!openNewReceiptPage}"/> &nbsp;&nbsp; <!-- onclick="window.open('/apex/CreateNewReceipt','_parent');" -->
                        <apex:commandButton value="New Debit Note" styleClass="slds-button slds-button--brand slds-button--small" action="{!openNewDebitNotePage}"/> &nbsp;&nbsp;
                        <apex:commandButton value="Close" styleClass="slds-button slds-button--brand slds-button--small" onclick="closePage();return false;" rendered="{!showCloseBtn}"/>   
                    </center><br/>
                                                
                </apex:outputPanel>
                        
               <apex:outputPanel >
                        <apex:pageblock > 
                            <apex:pageblockSection >
                                <apex:inputText value="{!receiptUnit}" style="font-size: 14px;  color:black;">Enter Unit &nbsp;</apex:inputText>
                                <apex:inputText value="{!receiptProject}" style="font-size: 14px;  color:black;">Enter Project &nbsp;</apex:inputText>
                                <apex:commandButton styleClass="slds-button slds-button--brand slds-button--small" action="{!search}" value="search" reRender="customerPanel2,buttons" status="status"/>
                            </apex:pageblockSection>    
                        </apex:pageblock> 
                </apex:outputPanel>
                                
                <apex:outputPanel id="customerPanel2">
                <apex:pageblock id="collectionspageblock">
                <apex:outputLabel ></apex:outputLabel>     
                   <apex:outputLabel rendered="{!objR.size != 0}" style="font-size: 14px; font-weight:  700; color:black;" value="Total Receipts : {!total_size}"/>                                                
                  <apex:pageblockSection title="Receipts" rendered="{!objR.size != 0}" columns="1" id="collectionspageblocksection" collapsible="false">
                    <apex:pageBlockTable value="{!wrapperscppdList}" var="R">                                                                           
                          <!--   <apex:column headerValue="Receipt Date" >
                                  <apex:outputtext value="{0, date, MMMM d','  yyyy}">
                                  <apex:param value="{!R.Receipt_Date__c}"/>
                                  </apex:outputtext>
                             </apex:column>-->
                             <apex:column headerValue="Receipt Number" >
                                <apex:Outputtext value="{!R.ReceiptR.Receipt_Number__c}"/>
                             </apex:column>
                             <apex:column headerValue="Applicants" >
                                {!R.ReceiptR.Opportunity__r.Primary_Name__c} , {!R.ReceiptR.Opportunity__r.Other_Applicants_Name__c}
                             </apex:column>
                             <!-- <apex:column headerValue="Cust Code" >
                                <apex:Outputtext value="{!R.ReceiptR.Unit__r.Cust_Code__c}"/>
                             </apex:column> -->
                             <apex:column headerValue="Project" >
                                <apex:Outputtext value="{!R.ReceiptR.Project__r.Name}"/>
                             </apex:column>
                             <apex:column headerValue="Flat No" >
                                <apex:Outputtext value="{!R.ReceiptR.Project_Unit__r.Name}"/>
                             </apex:column>
                             <apex:column headerValue="Status" >
                                <apex:Outputtext value="{!R.ReceiptR.Receipt_Status__c}"/>
                             </apex:column>
                             <apex:column headerValue="Instrument Type" >
                                <apex:Outputtext value="{!R.ReceiptR.Mode__c}"/>
                             </apex:column>
                             <apex:column headerValue="Instrument Date" >
                                <apex:OutputField value="{!R.ReceiptR.Cheque_DD_Date__c}"/>
                             </apex:column>
                             <apex:column headerValue="Instrument No" >
                                <apex:OutputField value="{!R.ReceiptR.Cheque_DD__c}"/>
                             </apex:column>
                             <apex:column headerValue="Bank">
                                <apex:Outputtext value="{!R.ReceiptR.DraweeBank__c}" rendered="{!R.ReceiptR.Mode__c != 'Credit Note'}"/>
                                <apex:Outputtext value="N/A" style="align:center;" rendered="{!R.ReceiptR.Mode__c == 'Credit Note'}"/>
                             </apex:column>
                             <apex:column headerValue="Description">
                                <apex:Outputtext value="{!R.ReceiptR.Description__c}" rendered="{!if(R.ReceiptR.Mode__c == 'Credit Note',true,false)}"/>
                                <apex:Outputtext value="N/A" style="align:center;" rendered="{!if(R.ReceiptR.Mode__c != 'Credit Note',true,false)}"/>
                             </apex:column>
                             <apex:column headerValue="In favour Of" >
                                <apex:Outputtext value="{!R.ReceiptR.Drawn_in_favour_of__c}" rendered="{!if(R.ReceiptR.Mode__c != 'TDS' && R.ReceiptR.Mode__c != 'Credit Note',true,false)}"/>
                                 <apex:Outputtext value="{!R.ReceiptR.PAN_no_of_TDS_Deductor__c}" rendered="{!R.ReceiptR.Mode__c == 'TDS'}"/>
                                 <apex:Outputtext value="N/A" style="align:center;" rendered="{!R.ReceiptR.Mode__c == 'Credit Note'}"/>
                             </apex:column>
                             <apex:column headerValue="Currency" >
                                <apex:Outputtext value="{!R.ReceiptR.Currency__c}"/>
                             </apex:column>
                             <apex:column headerValue="Total Amount" >
                                <apex:Outputtext value="Rs.{!R.Amount1}"/>
                             </apex:column>
                             <apex:column headerValue="On Account" >
                                <apex:Outputtext value="Rs.{!R.Amount2}" rendered="{!R.ReceiptR.Currency__c == 'Indian Rupee'}"/>
                             </apex:column>
                             <apex:column headerValue="Actions" >
                                 <a href="/{!R.ReceiptR.id}" target="_blank" style="float:left;"><u>View</u></a><br/>
                                 	<apex:outputPanel rendered="{!$Profile.Name == 'Accounts receivable' || $Profile.Name == 'System Administrator'}" ><a href="ReceiptModule?id={!R.ReceiptR.id}" target="_blank" style="float:left;"  ><u>Adjust</u></a><br/> </apex:outputPanel>
                                                                 
                             </apex:column>
                             <apex:facet name="footer">Showing Page # {!pageNumber} of {!totalPages}</apex:facet>
                    </apex:pageBlockTable>        
                </apex:pageblockSection>                    
               </apex:pageblock>
                </apex:outputPanel>
                
                <apex:outputPanel id="buttons" rendered="{!objR.size != 0}">
                  <apex:pageBlock >
                  
                     <apex:commandButton id="cm1" styleClass="slds-button slds-button--brand slds-button--small" action="{!Beginning}" title="Beginning" disabled="{!disablePrevious}" value="<<" reRender="customerPanel2,buttons" status="status"/> <!-- disabled="{!disablePrevious}" -->
                        <apex:commandButton styleClass="slds-button slds-button--brand slds-button--small" action="{!Previous}" title="Previous" value="<" disabled="{!disablePrevious}" reRender="customerPanel2,buttons" status="status"/>        
                           <apex:commandButton styleClass="slds-button slds-button--brand slds-button--small" action="{!Next}" title="Next" value=">" disabled="{!disableNext}" reRender="customerPanel2,buttons" status="status"/> <!-- disabled="{!disableNext}" -->
                             <apex:commandButton styleClass="slds-button slds-button--brand slds-button--small" action="{!End}" title="End" value=">>" disabled="{!disableNext}" reRender="customerPanel2,buttons" status="status"/>
                  
                  </apex:pageBlock>
                  </apex:outputPanel>
                  
            </apex:form>
<!--  </apex:tab>
            
        </apex:tabPanel>-->
  <!-- DEMAND SEARCH FORM -->

</fieldset>
<!-- / BOXED AREA -->
</div>
<!-- / SEARCH DEMANDS -->
</div>
<!-- / PRIMARY CONTENT WRAPPER -->
</div>
<!-- / REQUIRED SLDS WRAPPER -->  
<script>
    var j$ = jQuery.noConflict();
    j$(document).ready(function() {
        bindEvents();
    });
    function bindEvents() {
        //colorLinks();
        //colorRows();
    }
    function getCustomers(towerName) {
        getCustomersFunction(towerName);
    }
    function colorLinks() { 
        var links = document.getElementsByTagName('a');
        for (var a = 0; a < links.length; a++) {
            var randomColor = '#' + (Math.random().toFixed(6).toString(16)).slice(2);
            links[a].style.color = randomColor;
        }
    }        
    function selectAllCheckboxes(obj,receivedInputID){
        var inputCheckBox = document.getElementsByTagName("input");                  
        for(var i=0; i<inputCheckBox.length; i++){          
            if(inputCheckBox[i].id.indexOf(receivedInputID)!=-1){                                     
                inputCheckBox[i].checked = obj.checked;
            }
        }
    }
    
    function closePage() {
               setTimeout(function() {
                    
                    window.close();
                    
                }, 1000); 
            
             
        }
                      
</script>
            <!--
<div id="lwccontainer" ></div>
        <script>
    $Lightning.use("c:ReceiptSearch", function() {
        $Lightning.createComponent("c:searchReceipt",{},"lwccontainer",
                                  function(cmp) {
                console.log("button was created");
                // do some stuff
              });
    
    });
        
    </script>
            -->
</body>
  </html>
</apex:page>
